import{_ as n,D as r,c as s,j as t,a,I as o,a8 as l,o as i}from"./chunks/framework.C4h01PAh.js";const c="/sealdice-manual-next/assets/platform-qq-turnoff.BeOWAmaj.png",p="/sealdice-manual-next/assets/platform-qq-builtin-1.CrwUIyAe.png",h="/sealdice-manual-next/assets/platform-qq-builtin-2.CsxwmFcJ.png",d="/sealdice-manual-next/assets/platform-qq-llonebot-2.CRkT2vLu.png",_="/sealdice-manual-next/assets/platform-qq-bot-qrcode.CZVWW4Rf.jpg",Q="/sealdice-manual-next/assets/platform-qq-official-1.xvYBQLAg.png",g="/sealdice-manual-next/assets/platform-qq-official-2.BG1tRARH.png",u="/sealdice-manual-next/assets/platform-qq-official-3.DhHb4kkJ.png",pt=JSON.parse('{"title":"QQ","description":"","frontmatter":{"lang":"zh-cn","title":"QQ"},"headers":[],"relativePath":"deploy/platform-qq.md","filePath":"deploy/platform-qq.md","lastUpdated":1724232699000}'),b={name:"deploy/platform-qq.md"},m=l('<h1 id="qq" tabindex="-1">QQ <a class="header-anchor" href="#qq" aria-label="Permalink to &quot;QQ&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">本节内容</p><p>本节将包含你在 QQ 平台接入海豹核心需要了解的特定内容。</p></div><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><h3 id="有关-qq-平台机器人的说明" tabindex="-1">有关 QQ 平台机器人的说明 <a class="header-anchor" href="#有关-qq-平台机器人的说明" aria-label="Permalink to &quot;有关 QQ 平台机器人的说明&quot;">​</a></h3><p>直至目前，绝大部分群聊中的 QQ 机器人采用「<strong>假用户</strong>」方式，即通过第三方软件接入注册的另一个 QQ。<strong>QQ 官方一直在对第三方实现进行技术与非技术层面的多重打击。</strong></p><p>从目前的表现看来，QQ 官方会对账号行为进行检测，来区分出账号是否是正常用户（如不正常的登录方式，以不合理的速度在多地区登录等等）。我们无法得知具体的检测细节，但已证实的是，当 QQ 账号用作机器人并被检测到时，该 QQ 会视为风险账号，被官方予以警告，封禁，临时甚至 <strong>永久冻结</strong> 的惩罚。</p><p>尽管不同方案之间的差异很大（比如基于 Android QQ 协议的 Go-Cqhttp 已经<strong>基本不可用</strong>，而 <a href="#lagrange">Lagrange</a> 和 <a href="#llonebot">LLOneBot</a> 等基于 NTQQ 的方案目前比较稳定），但需要明白的是，这些方案都由社区第三方软件提供，实质上以 QQ 官方角度等同于「<strong>外挂软件</strong>」，并不受到官方支持（甚至是被打击的目标）。</p><p>因此，<em>是否在 QQ 平台搭建这样的非官方机器人取决于你的慎重考虑</em>。同时，第三方方案的可用性也可能会随时间推移而存在变化，海豹官方无法做出任何保证。</p><p>目前，仅有 <a href="#官方机器人">官方机器人服务</a> 是被 QQ 官方认可的机器人方案。该方案可用性由 QQ 官方保证，但目前 <strong>仅对企业用户和部分受邀个人用户开放</strong>，同时在功能上非常受限。</p><p>如果有可能，建议迁移到其它平台，在 QQ 平台选择何种方式取决于你自己的选择。</p><div class="danger custom-block"><p class="custom-block-title">危险</p><p>倘若出现账号被封禁等情况，海豹官方无力解决此类问题，也不对相应后果负责。</p></div><h3 id="对接引导" tabindex="-1">对接引导 <a class="header-anchor" href="#对接引导" aria-label="Permalink to &quot;对接引导&quot;">​</a></h3><p>所有支持的途径参见目录，本节提供了多种对接途径的引导。</p>',13),f=t("a",{href:"#内置客户端"},"内置客户端",-1),k=t("em",null,"有能力",-1),q=t("em",null,"更推荐",-1),L=l('<p>对于需要使用更加灵活的方案的用户，我们推荐如下：</p><ul><li>需要比较简单的部署流程，希望资源占用低的，见 <a href="#lagrange">Lagrange</a>；</li><li>需要比较简单的部署流程，不是特别在意资源占用的，见 <a href="#llonebot">LLOneBot</a>；</li><li>通过 docker 部署海豹的，见 <a href="./platform-qq-docker.html">QQ - Docker 中的海豹</a>；</li><li>如果你有 QQ 官方机器人权限，见 <a href="#官方机器人">官方机器人</a>；</li><li>Go-cqhttp 与 QSign 方案因可用性原因已被弃用。<strong>我们不建议任何用户再使用此方式部署 QQ 接入，同时强烈建议正在使用该方案的用户迁移</strong>。</li></ul><p>不同的对接方式适应不同的情况，可能会存在途径特有的功能缺失和其它问题，请根据自己的情况选择适合的方式。</p>',3),v={class:"warning custom-block"},x=t("p",{class:"custom-block-title"},[a("注意：对接基于 NTQQ PC 端协议的 QQ 方案时，注意对方是否支持 "),t("code",null,"戳一戳"),a(" 功能")],-1),T=t("p",null,"内置客户端/Lagrange、LLOneBot 和 Napcat 等基于 NTQQ PC 的 QQ 方案，在旧版本中由于 NTQQ 旧协议本身不支持的原因，缺失该功能。",-1),C=t("p",null,"请使用：",-1),P=t("li",null,"……",-1),N=t("p",null,[a("等方案的用户及时更新或"),t("strong",null,"关闭"),a("位于 "),t("code",null,"综合设置"),a(" - "),t("code",null,"基本设置"),a(" 的 "),t("code",null,"启用戳一戳"),a(" 开关，以免产生不必要的报错信息。")],-1),S=t("img",{src:c,alt:"关闭戳一戳开关",width:"80%"},null,-1),B=t("div",{class:"warning custom-block"},[t("p",{class:"custom-block-title"},"注意"),t("p",null,"内置客户端、Lagrange、LLOneBot 和 Napcat 都占用 PC 端协议。在使用这些连接方式时，不可同时登录 PC 端 QQ，否则将导致挤占下线。"),t("p",null,"由于官方 QQ 设定，PC 端协议（即以上四种登录方式）每隔 30 天需要重新登录。")],-1),A={id:"内置客户端",tabindex:"-1"},I=t("a",{class:"header-anchor",href:"#内置客户端","aria-label":'Permalink to "内置客户端 <Badge type="tip" text="v1.4.5" />"'},"​",-1),y=l('<div class="warning custom-block"><p class="custom-block-title">注意</p><p>需要知道的是，该方案也是前言中提到的非官方机器人，并不受到 QQ 官方认可。</p></div><div class="danger custom-block"><p class="custom-block-title">危险：部分过时系统不支持</p><p>内置客户端暂不支持 Windows 7，Windows Server 2008，32 位 Windows 也不可用。</p><p>Windows Server 2012 可能会缺少部分运行库，需要自行下载安装。</p></div><p>进入海豹 Web UI 的「账号设置」新增连接，选择账号类型「QQ(内置客户端)」，这也是默认选项，填写 QQ 号，其余内容无需修改：</p><img src="'+p+'" alt="内置客户端" width="80%"><p>随后使用登录了目标账号的手机 QQ 尽快扫码登录（二维码会在十秒左右出现，请耐心等待）：</p><img src="'+h+'" alt="内置客户端扫码登录" width="40%"><p>在手机上确认登录以后，等待状态变为「已连接」即可。</p><p>登录的账号由扫码的账号决定，请不要询问 <code>为什么登录的是我自己的账号</code> 之类的问题。</p><div class="warning custom-block"><p class="custom-block-title">安卓端海豹扫码</p><p>由于 QQ 的安全策略并不支持图片识别或长按扫描二维码登录，你需要两个手机（一个运行海豹，一个扫码）或下载 TIM 软件扫码登录。</p></div>',9),O={class:"warning custom-block"},w=t("p",{class:"custom-block-title"},"内置客户端版本",-1),W=t("code",null,"尝试删除账号重新添加",-1),V=t("code",null,"在「账号设置」界面切换签名服务",-1),D=t("em",null,"请勿随意修改签名版本",-1),R=l('<h2 id="分离部署" tabindex="-1">分离部署 <a class="header-anchor" href="#分离部署" aria-label="Permalink to &quot;分离部署&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">分离部署</p><p>不同于内置客户端，分离部署为海豹核心和 QQ 登录框架分别启动，然后按照各个框架的连接协议将海豹核心和 QQ 登录框架连接起来。</p><p>相比之下分离部署有更强的稳定性，但操作难度也有一定程度的增加。</p></div><p>使用此方法你可能需要对「QQ(onebot11正向WS)」、「QQ(onebot11正向WS)」、「QQ(onebot11正向WS)」、「[WIP]Satori」的区别有一定了解。</p><p>「QQ(onebot11正向WS)」遵循 onebot11 标准，由海豹核心主动连接 QQ 登录框架。在 UI 界面添加「连接地址」格式应当为 <code>ws://{Host}:{Port}</code>。</p><p>「QQ(onebot11反向WS)」遵循 onebot11 标准，由 QQ 登录框架主动连接海豹核心。在 UI 界面添加「连接地址」格式应当为 <code>{Host}:{Port}</code>。</p><p>「[WIP]Satori」遵循 Satori 标准，由海豹核心主动连接 QQ 登录框架。</p>',6),E={id:"lagrange",tabindex:"-1"},U=t("a",{class:"header-anchor",href:"#lagrange","aria-label":'Permalink to "Lagrange <Badge type="tip" text="v1.4.2" />"'},"​",-1),z=l('<div class="info custom-block"><p class="custom-block-title">Lagrange</p><p><a href="https://github.com/KonataDev/Lagrange.Core" target="_blank" rel="noreferrer">Lagrange</a>（拉格兰）是一个 NTQQ 协议相关的开源项目。其包括目前实现了 Linux NTQQ 协议的 Lagrange.Core，和提供 OneBot-V11 API 的 Lagrange.Onebot 两部分。</p><p>与 GoCqhttp 类似，Lagrange 可以很方便的在多个平台（Windows、Linux、Mac）部署，海豹核心可以对接其提供的 OneBot-V11 API 来提供 QQ 骰子服务。</p></div><h4 id="登录-lagrange" tabindex="-1">登录 Lagrange <a class="header-anchor" href="#登录-lagrange" aria-label="Permalink to &quot;登录 Lagrange&quot;">​</a></h4><p>请按照 <a href="https://lagrangedev.github.io/Lagrange.Doc/Lagrange.OneBot/Config/" target="_blank" rel="noreferrer">Lagrange 手册</a>自行部署 Lagrange，并按照手册和自己的需求填写配置文件。</p><h4 id="海豹连接-lagrange" tabindex="-1">海豹连接 Lagrange <a class="header-anchor" href="#海豹连接-lagrange" aria-label="Permalink to &quot;海豹连接 Lagrange&quot;">​</a></h4><p>进入海豹 Web UI 的「账号设置」新增链接，按照自己的 Lagrange 配置文件选择 onebot11 账号类型，填写 QQ 号和「连接地址」。</p><p>成功连接后即可使用。</p>',6),G={id:"llonebot",tabindex:"-1"},H=t("a",{class:"header-anchor",href:"#llonebot","aria-label":'Permalink to "LLOneBot <Badge type="tip" text="v1.4.2" />"'},"​",-1),$=l('<div class="info custom-block"><p class="custom-block-title">LLOneBot</p><p><a href="https://github.com/LiteLoaderQQNT/LiteLoaderQQNT" target="_blank" rel="noreferrer">LiteLoaderQQNT</a>（LiteLoader）是 NTQQ 的插件加载器，允许通过插件注入 QQ 实现某些特定的功能。</p><p><a href="https://github.com/LLOneBot/LLOneBot" target="_blank" rel="noreferrer">LLOneBot</a> 则是 Liteloader 的插件之一，可以实现劫持客户端对外开放 API，可以理解为装在 PC 上的 Shamrock。</p></div><div class="warning custom-block"><p class="custom-block-title">使用此方案的用户请注意不要随意<em>更新</em> QQ 客户端。</p><p>由于 QQ 客户端检测机制的变化，更新 QQ 客户端后可能导致方案不可用，并且更新后需要重新安装登录框架，所以不建议用户随意更新 QQ 客户端。</p></div><h4 id="安装-llonebot" tabindex="-1">安装 LLOneBot <a class="header-anchor" href="#安装-llonebot" aria-label="Permalink to &quot;安装 LLOneBot&quot;">​</a></h4><p>请参考 <a href="https://llonebot.github.io/zh-CN/" target="_blank" rel="noreferrer">官方文档</a> 中的说明。</p><h4 id="配置-llonebot" tabindex="-1">配置 LLOneBot <a class="header-anchor" href="#配置-llonebot" aria-label="Permalink to &quot;配置 LLOneBot&quot;">​</a></h4><p>安装完成后重新登录 QQ，在 QQ 设置中 LLOneBot 的设置页：</p><p><img src="'+d+'" alt="LLOneBot 设置页"></p><p>支持两种方式与海豹对接：</p><ul><li>正向连接：默认开放的正向 ws 端口为 3001，在海豹的新添账号选择「QQ(onebot11正向WS)」，账号处随便填写，连接地址填 <code>ws://localhost:3001</code>。</li><li>反向连接：关闭 LLOneBot 的正向连接开关，打开 LLOneBot 的反向连接开关，在「反向WebSocket监听地址」里点击「添加」，输入 <code>ws://127.0.0.1:4001/ws</code>，然后在海豹的新添账号选择「QQ(onebot11反向WS)」，输入账号。</li></ul><div class="tip custom-block"><p class="custom-block-title">提示</p><ul><li>如若想修改端口请在 LLOneBot 的设置 UI 自行修改。</li><li>请注意设置中的正向连接和反向连接请 <strong>不要同时打开</strong>，否则会发不出消息。</li><li><strong>如果你是在服务器上部署，可能需要使用 <a href="https://memreduct.org/mem-reduct-download/" target="_blank" rel="noreferrer">Mem Reduct</a> 之类的工具定时清理过高的内存占用。</strong></li></ul></div><h3 id="napcatqq" tabindex="-1">NapCatQQ <a class="header-anchor" href="#napcatqq" aria-label="Permalink to &quot;NapCatQQ&quot;">​</a></h3><div class="info custom-block"><p class="custom-block-title">NapCatQQ</p><p><a href="https://github.com/NapNeko/NapCatQQ" target="_blank" rel="noreferrer">NapCatQQ</a> 是在后台低占用运行的无头（没有界面）的 NTQQ，具体占用会因人而异，QQ 群、好友越多占用越高。</p><p><a href="https://napneko.github.io/zh-CN/" target="_blank" rel="noreferrer">NapCat 官方文档</a></p></div><div class="warning custom-block"><p class="custom-block-title">使用此方案的用户请注意不要随意<em>更新</em> QQ 客户端。</p><p>由于 QQ 客户端检测机制的变化，更新 QQ 客户端后可能导致方案不可用，并且更新后需要重新安装登录框架，所以不建议用户随意更新 QQ 客户端。</p></div><p>NapCat 是基于官方 NTQQ 实现的 Bot 框架，因此在开始前，你需要根据 <a href="https://napneko.github.io/zh-CN/guide/getting-started#%E5%AE%89%E8%A3%85-qq" target="_blank" rel="noreferrer">NapCatQQ</a> 的手册安装官方 QQ，若 QQ 版本过低会导致程序无法正常启动。</p><h4 id="下载-napcatqq" tabindex="-1">下载 NapCatQQ <a class="header-anchor" href="#下载-napcatqq" aria-label="Permalink to &quot;下载 NapCatQQ&quot;">​</a></h4><p>请按照 <a href="https://napneko.github.io/zh-CN/guide/getting-started" target="_blank" rel="noreferrer">NapCat 官方手册</a>下载安装，如果你不确定自己可以完全理解 NapCat 官方手册并操作，请不要安装 9.9.12 版本 QQ。</p><p>然后按照<a href="https://napneko.github.io/zh-CN/guide/config/basic" target="_blank" rel="noreferrer">基础配置</a>和自己的需求修改配置文件。</p><h4 id="海豹连接" tabindex="-1">海豹连接 <a class="header-anchor" href="#海豹连接" aria-label="Permalink to &quot;海豹连接&quot;">​</a></h4><p>进入海豹 Web UI 的「账号设置」新增链接，按照自己的配置文件选择 onebot11 账号类型，填写 QQ 号和「连接地址」。</p><p>成功连接后即可使用。</p>',20),j={id:"chronocat",tabindex:"-1"},J=t("a",{class:"header-anchor",href:"#chronocat","aria-label":'Permalink to "Chronocat <Badge type="tip" text="v1.4.2" />"'},"​",-1),M=t("h4",{id:"安装-chronocat",tabindex:"-1"},[a("安装 Chronocat "),t("a",{class:"header-anchor",href:"#安装-chronocat","aria-label":'Permalink to "安装 Chronocat"'},"​")],-1),F=t("p",null,[a("请按照 "),t("a",{href:"https://chronocat.vercel.app/guide/install/shell",target:"_blank",rel:"noreferrer"},"官方手册"),a(" 安装 Chronocat。")],-1),K={id:"chronocat-satori-协议",tabindex:"-1"},Y=t("a",{class:"header-anchor",href:"#chronocat-satori-协议","aria-label":'Permalink to "Chronocat Satori 协议 <Badge type="tip" text="v1.4.5" />"'},"​",-1),Z=t("p",null,"在账号添加中，选择「[WIP]Satori」，填写相应信息进行连接。",-1),X={id:"官方机器人",tabindex:"-1"},tt=t("a",{class:"header-anchor",href:"#官方机器人","aria-label":'Permalink to "官方机器人 <Badge type="tip" text="v1.4.2" />"'},"​",-1),at=l('<div class="tip custom-block"><p class="custom-block-title">提示：QQ 机器人</p><p>QQ 官方目前已开放了机器人功能，可进入 <a href="https://q.qq.com/#/" target="_blank" rel="noreferrer">QQ 开放平台</a> 进行申请。</p><p>但截止到目前，<strong>QQ 官方机器人的群聊权限并未对所有人开放</strong>。我们也希望在未来，每个人都能轻松地对接上官方提供的机器人服务。</p><p>同时，由于 QQ 官方对机器人能力的严格限制（包括获取 QQ 号、昵称，非 @ 时响应，私聊，群控等大量功能目前不支持），目前<strong>对接官方接口的骰子很多功能无法支持</strong>（如跑团 Log，暗骰，对抗等）。</p></div><h3 id="尝试一下" tabindex="-1">尝试一下 <a class="header-anchor" href="#尝试一下" aria-label="Permalink to &quot;尝试一下&quot;">​</a></h3><p>如果你想尝试一下这样的机器人，非常欢迎你使用海豹官方的骰子：</p><img src="'+_+'" alt="海豹机器人二维码" width="65%"><h3 id="获取连接所需信息" tabindex="-1">获取连接所需信息 <a class="header-anchor" href="#获取连接所需信息" aria-label="Permalink to &quot;获取连接所需信息&quot;">​</a></h3><p>要获取用于连接海豹的信息之前，你需要建立好一个 QQ 机器人应用。可前往 <a href="https://q.qq.com/#/" target="_blank" rel="noreferrer">QQ 开放平台</a> 进行申请，进行<strong>实名</strong>注册后，创建一个机器人应用。</p><p>创建完成后，进入机器人管理后台，切换到「开发设置」页面：</p><img src="'+Q+'" alt="切换到开发设置" width="40%"><p>在页面中你可以看到这样的信息，其中「机器人 ID」「机器人令牌」「机器人密钥」这三项是海豹进行连接所需要的。</p><p><img src="'+g+'" alt="开发设置"></p><h3 id="连接海豹" tabindex="-1">连接海豹 <a class="header-anchor" href="#连接海豹" aria-label="Permalink to &quot;连接海豹&quot;">​</a></h3><p>登录海豹并添加账号，选择「QQ(官方机器人)」。填写对应的信息点击连接。你的海豹应该可以正常连接官方机器人运作了！</p><img src="'+u+'" alt="连接官方 Bot" width="100%"><h3 id="使用海豹" tabindex="-1">使用海豹 <a class="header-anchor" href="#使用海豹" aria-label="Permalink to &quot;使用海豹&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">注意</p><p>目前官方机器人只响应包含 <code>@</code> 的消息，操作时请注意。</p></div>',15);function et(ot,lt,nt,rt,st,it){const e=r("Badge");return i(),s("div",null,[m,t("p",null,[a("从 "),o(e,{type:"tip",text:"v1.4.5"}),a(" 开始，我们推荐使用 "),f,a(" 进行连接，这是面向一般用户提供的简单对接方式，对于"),k,a("的骰主，我们"),q,a("其他的分离部署方案。")]),L,t("div",v,[x,T,C,t("ul",null,[t("li",null,[a("海豹版本 "),o(e,{type:"tip",text:"v1.4.6"}),a(" 之前的内置客户端")]),t("li",null,[o(e,{type:"tip",text:"6e350b0"}),a(" 之前的 Lagrange")]),t("li",null,[o(e,{type:"tip",text:"v3.27.0"}),a(" 之前的 LLOneBot")]),t("li",null,[o(e,{type:"tip",text:"v1.6.7"}),a(" 之前的 Napcat")]),P]),N,S]),B,t("h2",A,[a("内置客户端 "),o(e,{type:"tip",text:"v1.4.5"}),a(),I]),t("p",null,[a("海豹从 "),o(e,{type:"tip",text:"v1.4.5"}),a(" 开始提供了内置客户端的连接方式。")]),y,t("div",O,[w,t("p",null,[a("使用此方案应当尽快更新到 "),o(e,{type:"tip",text:"v1.4.6"}),a(" 及以上版本的海豹，当遇到登录失败、无法回复等情况请先 "),W,a("、"),V,a(" 等方法。")]),t("p",null,[a("对于 "),o(e,{type:"tip",text:"v1.4.6"}),a(" 及以上版本的海豹，修改签名时"),D,a("，除非你知道自己在干什么。")])]),R,t("h3",E,[a("Lagrange "),o(e,{type:"tip",text:"v1.4.2"}),a(),U]),t("p",null,[a("海豹从 "),o(e,{type:"tip",text:"v1.4.2"}),a(" 开始适配了 Lagrange（拉格兰）的连接。")]),z,t("h3",G,[a("LLOneBot "),o(e,{type:"tip",text:"v1.4.2"}),a(),H]),t("p",null,[a("海豹从 "),o(e,{type:"tip",text:"v1.4.2"}),a(" 版本开始支持通过 OneBot 协议连接 LLOneBot。")]),$,t("h3",j,[a("Chronocat "),o(e,{type:"tip",text:"v1.4.2"}),a(),J]),t("p",null,[a("从 "),o(e,{type:"tip",text:"v1.4.5"}),a(" 开始适配了与 Chronocat 的 Satori 协议连接。")]),M,F,t("h4",K,[a("Chronocat Satori 协议 "),o(e,{type:"tip",text:"v1.4.5"}),a(),Y]),Z,t("h2",X,[a("官方机器人 "),o(e,{type:"tip",text:"v1.4.2"}),a(),tt]),t("p",null,[a("海豹从 "),o(e,{type:"tip",text:"v1.4.2"}),a(" 开始支持对接 QQ 官方的机器人服务。")]),at])}const ht=n(b,[["render",et]]);export{pt as __pageData,ht as default};
